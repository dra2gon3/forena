<?php

function forena_menu() { 
	$items = array(); 
	$items['ft'] = array(
	  'page callback' => 'forena_test', 
	  'page arguements' => array(), 
	  'title' => 'Forena Testing',
	  'access arguments' => array('access content'), 
	  'type' => MENU_CALLBACK, 
	); 
	
	return $items; 
}
/**
 * Test function for white box testing. 
 *
 * @return unknown
 */
function forena_test() { 
  $output .= 'Report start'; 

  $r = '<body xmlns:frx="urn:FrxReports"><div frx:block="sample/sampleXML" ><div class="repeater" frx:foreach="row"><p>this is a test report for {first_name}</p></div></div></body>'; 
  $output .= forena_report($r); 
  return $output; 
}

/**
 * Render report with some data
 *
 * @param unknown_type $report
 * @param unknown_type $format
 * @param unknown_type $data
 * @return unknown
 */
function forena_report ($report, $format='', $data='') {
  require_once('forena.common.inc'); 
  $o = new FrxReport($report,$data);
  $output = $o->render($report, $format, $data); 
  return $output;  
}
